!function(){var e,o="undefined"!=typeof window?window:this,r=()=>!("undefined"==typeof window||!window.process||!window.process.platform),t=()=>!("undefined"==typeof module||!module.exports),i=()=>!("undefined"==typeof window||!window.hasOwnProperty("cordova")),n=!t()&&!r()||i()?{}:require("fs"),a=!t()&&!r()||i()?{}:require("path"),s=!t()||r()||i()?window.atob:require("atob"),l=!t()||r()||i()?window.btoa:require("btoa");class c{constructor(e){if("string"!=typeof e)throw new Error("Please provide a valid javascript-cookie string.");var o=-1===e.indexOf(";")?[e]:e.split(";");if(-1===o[0].indexOf("="))throw new Error('Invalid cookie-string. Valid example => "username=Diablo Luna; expires=Thu, 18 Dec 2013 12:00:00 UTC; path=/" or just "username=Diablo Luna"');var r=o[0].split("=");this.key=r[0],this.value=r[1];for(var t=1;t<o.length;t++){let e=o[t];if(-1===e.indexOf("="))continue;let r=e.split("=")[0],i=e.split("=")[1];this[r.replace(/\s+/g,"")]=i}var i=this.value;return"string"==typeof i&&(i.match(/\{([^)]+)\}/g)||i.match(/\[([^)]+)\]/g)?i=JSON.parse(i):i.match(/^\d+$/)?i=parseInt(i):i.match(/^(\d|\.)+$/)?i=parseFloat(i):"true"===i?i=!0:"false"===i?i=!1:"undefined"===i?i=void 0:"null"===i?i=null:Date.parse(i)&&(i=new Date(Date.parse(i))),this.value=i),this.cookie_str=e,this}get expired(){var e=new Date,o=this.expiration_date||this.expires?new Date(this.expiration_date||this.expires):null;return!!o&&e>o}get size(){var e=encodeURIComponent(this.cookie_str).match(/%[89ABab]/g);return this.cookie_str.length+(e?e.length:0)}}var f={},d=!1,u=[],p={cookies_limit:!0,cookies_size_limit:!0,cookies_file:"./oreo.cookies",auto_samesite:!0};function h(){var e={};if(!t()&&!r()||i())if(i()){var o=window.localStorage.getItem("o-cookies-index");if(o)for(var l=o.split(","),d=0;d<l.length;d++)e[l[d]]=window.localStorage.getItem(`o-cookie-${l[d]}`)}else{var u=document.cookie;for(l=u?u.split(";"):[],d=0;d<l.length;d++){e[l[d].split("=")[0].replace(/^(\s+)/g,"")]=l[d]}}else try{var h=r()?require("electron").remote:null,v=r()&&h?h.app.getPath("userData"):"./",k=p.cookies_file&&"./oreo.cookies"!==p.cookies_file?p.cookies_file:a.join(v,p.cookies_file);if(n.existsSync(k)){var w=function(e,o){e=(e=(e=e.reverse()).hexDecode()).reverse();var r=(e=s(e)).indexOf("@k:");if(-1!==r){var t=e.substring(r+3,e.length);if(t!==o)throw new Error("Invalid cookies.oreo file key")}return e.replace(/(@k:).*$/,"")}(n.readFileSync(k,"utf-8"));e=JSON.parse(w)}}catch(e){throw new Error("READ_OREO_COOKIES_FILE_ERROR :: "+e.toString())}for(var d in e)"string"==typeof e[d]&&(f[d]=new c(e[d]));return f}function v(e,o){return e=(e=(e=(e=l(e="string"==typeof o?e+"@k:"+o:e)).reverse()).hexEncode()).reverse()}e=((o,r,t)=>{if(void 0===o)throw new Error("Please define at least one parameter to use oreo method.");return void 0===r?e.get(o):e.set(o,r,t||{})}),Object.defineProperty(e,"list",{get:()=>{!1===d&&h();var e=[];for(var o in f)f[o]&&e.push(f[o].cookie_str);return e}}),Object.defineProperty(e,"cookies",{get:()=>{!1===d&&h();var e={};for(var o in f)f[o]&&(e[o]=f[o]);return e}}),Object.defineProperty(e,"length",{get:()=>{!1===d&&h();var e=0;for(var o in f)null!==f[o]&&(e+=1);return e}}),Object.defineProperty(e,"file",{get:()=>{if(!r()&&!t())return null;var e=r()?require("electron").remote:{},o=r()&&e?e.app.getPath("userData"):"./";return p.cookies_file&&"./oreo.cookies"!==p.cookies_file?p.cookies_file:a.join(o,p.cookies_file)}}),e.config=(e=>{if("object"!=typeof e)throw new Error("Please define a object as first-parameter with all properties to change in configuration.");for(var o in p)e[o]&&(p[o]=e[o]);return!0}),e.get=(o=>{if(void 0===o)throw new Error("Please define the cookie-name as key parameter.");h();var r=function(o){var r=[],t=-1===o.indexOf("@")?"/":o.split("@")[1]||"/";for(var i in o=-1===o.indexOf("@")?o:o.split("@")[0],f){let e=-1===i.indexOf("@")?"/":i.split("@")[1]||"/",n=-1===i.indexOf("@")?i:i.split("@")[0];n===o&&(0===t.indexOf(e)&&r.push(i))}r.sort().reverse();var n=f[r[0]];n&&!0===n.expired&&(e.remove(o),n=void 0);return n}(o=`${o}@${"undefined"!=typeof window&&window.location?window.location.pathname||"/":""}`);return r?r.value:void 0}),e.remove=(o=>{if("string"!=typeof o)throw new Error("Please define the cookie-name as key parameter to remove the cookie.");if(!1===d&&h(),!f[o])return!0;f[o]=null;let s=f;for(var l in s)s[l]||delete s[l];var c=function(){var e=[];return Object.keys(s).forEach(o=>e.push(o)),e.length>0?e.join(","):""}();if(!t()&&!r()||i())i()?(window.localStorage.removeItem(`o-cookie-${o}`),window.localStorage.setItem("o-cookies-index",c)):(document.cookie=`${o}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; samesite=Lax`,window.localStorage.setItem("o-cookies-index",c));else{var u={};for(var l in s)u[l]=s[l].cookie_str;var k=v(JSON.stringify(u)),w=r()?require("electron").remote:null,g=r()&&w?w.app.getPath("userData"):"./";n.writeFileSync(p.cookies_file&&"./oreo.cookies"!==p.cookies_file?p.cookies_file:a.join(g,p.cookies_file),k)}return e.fire("remove",{cookie_key:o}),!0}),e.eat=e.remove,e.set=((o,s,l)=>{if("string"!=typeof o)throw new Error("Please define the cookie-name as key parameter.");if(void 0===s)throw new Error("Please define a value to storage in the cookie.");if(void 0===l&&(l={}),!o.match(/^[a-zA-Z0-9\_\-]*$/g))throw new Error('Invalid cookie-name. Please use simple names like: "cookiename", "cookie_name" even "CooKiE_NaMe"');var u,k;(!0===p.auto_samesite&&(l.samesite="Lax"),s instanceof Date?s=s.toISOString():"boolean"==typeof s?s=!0===s?"true":"false":"object"==typeof s&&(s=JSON.stringify(s)),"number"==typeof l)?((k=new Date).setDate(k.getDate()+l),u=k):l instanceof Date?u=l:"string"==typeof l&&Date.parse(l)&&(u=new Date(u));(u instanceof Date&&(l={expires:u.toUTCString()}),l.expires)||((k=new Date).setMonth(k.getMonth()+1),l.expires=k);"string"==typeof l.path&&(o=`${o}@${l.path}`);var w=`${o}=${s}`;for(var g in l){let e=l[g];e instanceof Date&&(e=e.toUTCString()),w+=`; ${g.toLowerCase()}=${e}`}var m=function(e){!1===d&&h();var o=new c(e);if(o.size>4096&&!1!==p.cookies_size_limit)throw new Error("COOKIE_WRITE_ERROR :: the new cookie has more than 4096 bytes. You can remove this size_limit with oreo.config( ) [Electron & Cordova Only].");var s=f[o.key]?0:1;if(!1!==p.cookies_limit&&Object.keys(f).length+s>128)throw new Error("COOKIES_LIMIT_EXCEEDED :: Browsers have a limit of ~128 cookies per page. You can disable this limit (Only for electron, node.js & cordova) with oreo.config( )");let l=f;for(var u in l[o.key]=o,l)l[u]||delete l[u];var k=(w=[],Object.keys(l).forEach(e=>w.push(e)),w.length>0?w.join(","):"");var w;if(!t()&&!r()||i())i()?(window.localStorage.setItem(`o-cookie-${o.key}`,e),window.localStorage.setItem("o-cookies-index",k)):(document.cookie=e,window.localStorage.setItem("o-cookies-index",k));else{var g={};for(var u in l)g[u]=l[u].cookie_str;var m=JSON.stringify(g),y=v(m),_=r()?require("electron").remote:null,x=r()&&_?_.app.getPath("userData"):"./";n.writeFileSync(p.cookies_file&&"./oreo.cookies"!==p.cookies_file?p.cookies_file:a.join(x,p.cookies_file),y)}return f[o.key]=o,o}(w);return e.fire("set",{cookie:m,cookie_key:m.key}),m}),e.clear=(()=>{if(!t()&&!r()||i())if(i()){var o=window.localStorage;(o.getItem("o-cookies-index")||"").split(",").forEach(e=>o.removeItem(`o-cookie-${e}`)),o.removeItem("o-cookies-index")}else{for(var a=document.cookie.split(";"),s=0;s<a.length;s++){var l=a[s],c=l.indexOf("="),u=c>-1?l.substr(0,c):l,h=u.indexOf("@")?u.substring(u.indexOf("@")+1,u.length):null;document.cookie=u+`=; expires=Thu, 01 Jan 1970 00:00:00 GMT; samesite=Lax${h?`; path=${h}`:""}`}window.localStorage.removeItem("o-cookies-index")}else{var v=r()?require("electron").remote:null,k=r()&&v?v.app.getPath("userData"):"./",w=p.cookies_file&&"./oreo.cookies"!==p.cookies_file?p.cookies_file:h.join(k,p.cookies_file);n.existsSync(w)&&n.unlinkSync(w)}return f={},d=!1,e.fire("clear"),!0}),e.on=((e,o)=>{if("string"!=typeof e)throw new Error("No eventName defined, please neter a valid one.");if("function"!=typeof o)throw new Error("No callback function defined. Please declare one.");var r=u.find(e=>e.fn===o);return!!(r&&r.length>0)||(u.push({ev:e,fn:o}),!0)}),e.fire=((e,o)=>{var r=u.filter(o=>o.ev===e);if(!r||r.length<=0)return!0;for(var t=0;t<r.length;t++)try{r[t].fn(o||{})}catch(o){console.error(`Can't execute "${e}" event callback :: ${o.toString()}`)}return!0}),String.prototype.reverse=function(){return this.split("").reverse().join("")},String.prototype.hexEncode=function(){var e,o="";for(e=0;e<this.length;e++)o+=("000"+this.charCodeAt(e).toString(16)).slice(-4);return o},String.prototype.hexDecode=function(){var e,o=this.match(/.{1,4}/g)||[],r="";for(e=0;e<o.length;e++)r+=String.fromCharCode(parseInt(o[e],16));return r},"undefined"!=typeof module&&module.exports?(module.exports=e,o.oreo=e,o.cookies=e):(o.oreo=e,o.cookies=e)}();